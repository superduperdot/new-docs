---
title: 'Canton Token Standard'
---

<p class="intro-subheading">
  Transfer Stablecoins from your Brale account to other parties on the Canton Network.
</p>

<Note>
This guide uses the **Canton Ledger API** (not the Brale API). The Canton Ledger API has its own authentication, endpoints, and data model. The Brale API is used only to initiate the transfer; acceptance is handled via the Canton Ledger API on the recipient's participant node.
</Note>

## Prerequisites

- A Canton participant node with HTTP JSON API access
- Receiver party credentials (`RECEIVER_TOKEN`, `RECEIVER_PARTY_ID`, `RECEIVER_USER_ID`)
- An active transfer initiated from Brale (creates a `TransferInstruction` on the Canton ledger)

## Transfer Overview

Stablecoins issued by Brale are compatible with the Canton Token Standard, which specifies an interface for transferring any compliant tokens.

This is a 2-step process:
1. **Sender** creates a transfer via the Brale API → creates a `TransferInstruction` contract on Canton
2. **Recipient** exercises the `Accept` choice on the `TransferInstruction` contract via the Canton Ledger API

For transfers to parties also custodied by Brale, acceptance is performed automatically.

For transfers to external parties, the recipient must use the Ledger API. Support for manually accepting transfers is included in the Canton Utility UI and other Token Standard-compliant wallet applications.

<Warning>
Offers must be accepted within **72 hours** or they will expire and be automatically withdrawn.
</Warning>

## Accepting a Transfer via the Ledger and Token Standard APIs

<Note>
The curl examples below call the **Canton Ledger API** (not the Brale API). The `Accept: application/json` header is correct for the Canton JSON API. Do **not** use `Accept: application/json` with `api.brale.xyz` — see [Accept Header](/api-reference/brale-introduction#accept-header).
</Note>

### Step 1: Retrieve Pending Transfers

Query your node to list all pending `TransferInstruction` contracts associated with your party.

First, get the current ledger end offset:

```bash
curl -s GET \
  --url "${HTTP_JSON_API}/v2/state/ledger-end" \
  --header "Accept: application/json" \
  --header "Authorization: Bearer ${RECEIVER_TOKEN}"
```

Then query for active `TransferInstruction` contracts at that offset:

```bash
curl -s \
  --url "${HTTP_JSON_API}/v2/state/active-contracts" \
  --header "Authorization: Bearer ${RECEIVER_TOKEN}" \
  --header "Content-Type: application/json" \
  --request POST \
  --data @- <<EOF
{
    "verbose": false,
    "activeAtOffset": "${OFFSET}",
    "filter": {
        "filtersByParty": {
            "${RECEIVER_PARTY_ID}": {
                "cumulative": [{
                    "identifierFilter": {
                        "InterfaceFilter": {
                            "value": {
                                "interfaceId":"55ba4deb0ad4662c4168b39859738a0e91388d252286480c7331b3f71a517281:Splice.Api.Token.TransferInstructionV1:TransferInstruction",
                                "includeInterfaceView": true,
                                "includeCreatedEventBlob": false
                            }
                        }
                    }
                }]
            }
        }
    }
}
EOF
```

Find the `TransferInstruction` you want to accept and note its `contractId` and `interfaceId`.

### Step 2: Get Contextual Data for Acceptance

Use the off-ledger Token Standard API to obtain context required for accepting:

```bash
curl -s \
    --url "https://api.utilities.digitalasset-dev.com/api/token-standard/v0/registrars/party-28dc4516-b5ca-44ff-86c7-2107e90a6807%3A%3A1220b8301e18aa8a401d6e34e6c20f8b0243183c514373bca8f1b6b9270246341a9e/registry/transfer-instruction/v1/${TRANSFERINSTRUCTION_CONTRACT_ID}/choice-contexts/accept" \
    --header "Content-Type: application/json" \
    --request POST \
    --data @- <<EOF
{
   "meta": {},
   "excludeDebugFields": true
}
EOF
```

Note the `choiceContextData` and `disclosedContracts` in the response.

### Step 3: Accept the Transfer

Exercise the `Accept` choice via the Canton Ledger API:

```bash
curl -s \
    --url "${HTTP_JSON_API}/v2/commands/submit-and-wait-for-transaction" \
    --header "Authorization: Bearer ${RECEIVER_TOKEN}" \
    --header "Content-Type: application/json" \
    --request POST \
    --data @- <<EOF
{
   "commands": {
        "commands": [
            {
                "ExerciseCommand": {
                    "templateId": "${TRANSFERINSTRUCTION_INTERFACE_ID}",
                    "contractId": "${TRANSFERINSTRUCTION_CONTRACT_ID}",
                    "choice": "TransferInstruction_Accept",
                    "choiceArgument": {
                        "extraArgs": {
                            "context": ${CHOICECONTEXTDATA},
                            "meta": {
                                "values": {}
                            }
                        }
                    }
                }
            }
        ],
        "workflowId": "",
        "userId": "${RECEIVER_USER_ID}",
        "commandId": "$(uuidgen | tr -d '\n')",
        "deduplicationPeriod": {
            "DeduplicationDuration": {
                "value": {
                    "seconds": 30,
                    "nanos": 0
                }
            }
        },
        "actAs": [
            "${RECEIVER_PARTY_ID}"
        ],
        "readAs": [],
        "submissionId": "$(uuidgen | tr -d '\n')",
        "disclosedContracts": ${DISCLOSEDCONTRACTS},
        "domainId": "",
        "packageIdSelectionPreference": []
    }
}
EOF
```

## Verification

<Warning>
**Canton Ledger API access required.** This guide cannot be verified against the Brale API alone. Verification requires a Canton participant node. The Brale side (initiating the transfer via `POST /transfers` with `transfer_type: "canton"`) is covered in the [Stablecoin Payouts](/guides/stablecoin-payouts) guide.
</Warning>

```bash
# Brale side: Verify canton address exists — expect HTTP 200
curl -s -w "\nHTTP: %{http_code}" \
  "https://api.brale.xyz/accounts/${ACCOUNT_ID}/addresses" \
  --header "Authorization: Bearer ${ACCESS_TOKEN}" \
  | python3 -c "
import sys, json
data = json.load(sys.stdin)
canton = [a for a in data['addresses'] if 'canton' in a.get('transfer_types', [])]
print(f'Canton addresses: {len(canton)}')
for a in canton[:3]:
    print(f'  {a[\"id\"]} | type={a[\"type\"]} | tt={a[\"transfer_types\"]}')
"
```
